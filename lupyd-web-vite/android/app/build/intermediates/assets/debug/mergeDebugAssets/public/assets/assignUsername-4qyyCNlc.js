import{J as x,r,u as f,a1 as p,j as e,C as j,g as v,I as y,B as b,a0 as C}from"./index-Fc6vCu0Z.js";import{L as P}from"./layout-SJrbIbVr.js";import{A as U}from"./animated-card-BwIvvYmE.js";import{L as A}from"./label-BcfA8aAD.js";import{t as E}from"./use-toast-MZkaCwcs.js";function B(){const t=x(),[n,m]=r.useState(""),[d,s]=r.useState(""),h=f(),i=()=>{const a=l!=""?l:"/";h(a,{replace:!0})},c=()=>{if(!t.user){s("Signin Attempt Failed");return}if(!C.isValidUsername(n)){s("Invalid username, should be greater than 2 characters and less than 30 characters and should only contain a-zA-Z0-9_");return}s("Username is being assigned..."),t.assignUsername(n).then(()=>{i()}).catch(a=>{console.error(a),E({title:"Username may have already exist"}),s("Username may have already exist")})},[u,N]=p(),[l,g]=r.useState("");return r.useEffect(()=>{t.username&&i()},[t]),r.useEffect(()=>{u.get("code")?(s(""),console.log("Handling redirected callback"),t.handleRedirectCallback().then(o=>{"targetPath"in o&&typeof o.targetPath=="string"&&g(o.targetPath)}).catch(console.error)):console.log("No redirection code")},[]),e.jsx(P,{children:e.jsx("div",{className:"container flex items-center justify-center min-h-[calc(100vh-8rem)] py-12",children:e.jsx("div",{className:"space-y-2",children:e.jsx(U,{children:e.jsx(j,{children:e.jsxs(v,{children:[e.jsx(A,{htmlFor:"username",children:"Username"}),e.jsx(y,{id:"username",value:n,onChange:a=>{m(a.target.value)},onKeyDown:a=>{a.key==="Enter"&&c()}}),e.jsx(b,{className:"w-full bg-black text-white hover:bg-gray-800",onClick:c,children:"Assign"}),e.jsx("p",{children:d})]})})})})})})}export{B as default};
