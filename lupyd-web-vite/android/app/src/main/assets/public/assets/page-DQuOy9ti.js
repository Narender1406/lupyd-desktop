import{j as e,V as b,W as y,Y as C,Z as M,_ as l,B as d,u as B,a4 as $,r as v,D as z,aj as q,C as o,d as m,e as h,g as x,A as D,h as k,i as P,I as T,N as H,q as Z,Q as f,m as J,s as K,f as Q,ag as W,o as Y}from"./index-Fc6vCu0Z.js";import{L as N}from"./label-BcfA8aAD.js";import{D as _,d as X,a as ee,b as se,c as ae}from"./dialog-eDhKFWIA.js";import{S as le,T as A,a as re}from"./triangle-alert-CaeNgVXH.js";import{U as ne}from"./upload-SNTiVnRz.js";import{G as ie}from"./globe-BGulvziv.js";import{U as te}from"./user-minus-BBqxuFQ6.js";function de({roles:c,permissions:w,overrides:a,onChange:g}){return e.jsxs("div",{className:"w-full overflow-x-auto",children:[e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-2 pr-2",children:"Permission"}),c.map(n=>e.jsx("th",{className:"text-left py-2 px-2 whitespace-nowrap",children:n.name},n.id))]})}),e.jsx("tbody",{children:w.map(n=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"py-2 pr-2 whitespace-nowrap font-medium",children:ce(n)}),c.map(u=>e.jsx("td",{className:"py-2 px-2",children:e.jsxs(b,{value:a?.[u.id]?.[n]||"inherit",onValueChange:p=>g(u.id,n,p),children:[e.jsx(y,{className:"h-8 w-[120px]",children:e.jsx(C,{})}),e.jsxs(M,{children:[e.jsx(l,{value:"inherit",children:"Inherit"}),e.jsx(l,{value:"allow",children:"Allow"}),e.jsx(l,{value:"deny",children:"Deny"})]})]})},u.id))]},n))})]}),e.jsx("div",{className:"mt-3",children:e.jsx(d,{className:"bg-black text-white hover:bg-gray-800",children:"Save Permissions"})})]})}function ce(c){switch(c){case"viewChannel":return"View channel";case"sendMessages":return"Send messages";case"manageMessages":return"Manage messages";case"attachFiles":return"Attach files";case"pinMessages":return"Pin messages";case"createThreads":return"Create threads";case"manageChannel":return"Manage channel";case"manageRoles":return"Manage roles"}}const oe={id:"1",name:"Design Enthusiasts",description:"A community for designers to share ideas, get feedback, and collaborate on projects.",avatar:"/placeholder.svg?height=80&width=80",isPrivate:!1,allowMemberInvites:!0,allowFileSharing:!0,muteNotifications:!1,autoDeleteMessages:!1,messageRetention:"never",members:[{id:"1",name:"Sarah Chen",username:"@sarahc",avatar:"/placeholder.svg?height=40&width=40",role:"admin",isOnline:!0},{id:"2",name:"Marcus Johnson",username:"@marcusj",avatar:"/placeholder.svg?height=40&width=40",role:"moderator",isOnline:!1},{id:"3",name:"Emma Rodriguez",username:"@emmar",avatar:"/placeholder.svg?height=40&width=40",role:"member",isOnline:!0},{id:"4",name:"David Kim",username:"@davidk",avatar:"/placeholder.svg?height=40&width=40",role:"member",isOnline:!0}]};function pe(){const c=B(),{id:w}=$(),[a,g]=v.useState(oe),[n,u]=v.useState(!1),[p,S]=v.useState(!1),[R,G]=v.useState({owner:{},admin:{},moderator:{},member:{},guest:{}}),O=["viewChannel","sendMessages","manageMessages","attachFiles","pinMessages","createThreads","manageChannel","manageRoles"],F=(s,r,t)=>{G(j=>({...j,[s]:{...j[s]||{},[r]:t}}))},i=(s,r)=>{g(t=>({...t,[s]:r}))},I=async()=>{S(!0),await new Promise(s=>setTimeout(s,1e3)),S(!1)},E=async()=>{await new Promise(s=>setTimeout(s,700)),c("/groups")},L=s=>{g(r=>({...r,members:r.members.filter(t=>t.id!==s)}))},U=(s,r)=>{g(t=>({...t,members:t.members.map(j=>j.id===s?{...j,role:r}:j)}))},V=s=>{switch(s){case"admin":return e.jsx(Y,{className:"h-4 w-4 text-yellow-500"});case"moderator":return e.jsx(W,{className:"h-4 w-4 text-blue-500"});default:return null}};return e.jsx(z,{children:e.jsxs("div",{className:"w-full max-w-5xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsxs(d,{variant:"ghost",onClick:()=>c(`/groups/${w}/info`),className:"flex items-center gap-2 shrink-0",children:[e.jsx(q,{className:"h-4 w-4"}),"Back"]}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold truncate",children:"Group Settings"}),e.jsx("p",{className:"text-muted-foreground text-sm truncate",children:"Manage preferences and members"})]})]}),e.jsx(d,{onClick:I,disabled:p,className:"bg-black text-white hover:bg-gray-800 w-full sm:w-auto",children:p?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(le,{className:"h-4 w-4 mr-2"}),"Save Changes"]})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(o,{className:"border-none shadow-sm",children:[e.jsx(m,{children:e.jsx(h,{children:"Basic Information"})}),e.jsxs(x,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"relative h-20 w-20",children:[e.jsxs(D,{className:"h-20 w-20",children:[e.jsx(k,{src:a.avatar||"/placeholder.svg?height=80&width=80"}),e.jsx(P,{className:"text-lg",children:a.name.slice(0,2).toUpperCase()})]}),e.jsx(d,{size:"sm",variant:"outline",className:"absolute -bottom-2 -right-2 h-8 w-8 rounded-full p-0 bg-white","aria-label":"Upload",children:e.jsx(ne,{className:"h-4 w-4"})})]})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium",children:"Group Avatar"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Upload a new image to change your group's avatar"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"name",children:"Group Name"}),e.jsx(T,{id:"name",value:a.name,onChange:s=>i("name",s.target.value),maxLength:50}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[a.name.length,"/50 characters"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"description",children:"Description"}),e.jsx(H,{id:"description",value:a.description,onChange:s=>i("description",s.target.value),rows:3,maxLength:200}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[a.description.length,"/200 characters"]})]})]})]}),e.jsxs(o,{className:"border-none shadow-sm",children:[e.jsx(m,{children:e.jsx(h,{children:"Privacy & Permissions"})}),e.jsxs(x,{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[a.isPrivate?e.jsx(Z,{className:"h-5 w-5 text-gray-600 shrink-0"}):e.jsx(ie,{className:"h-5 w-5 text-gray-600 shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:a.isPrivate?"Private Group":"Public Group"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.isPrivate?"Only invited members can see and join":"Anyone can discover and join this group"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(f,{checked:a.isPrivate,onCheckedChange:s=>i("isPrivate",s)})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"Allow Member Invites"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Let members invite others to join the group"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(f,{checked:a.allowMemberInvites,onCheckedChange:s=>i("allowMemberInvites",s)})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"File Sharing"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Allow members to share files and media"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(f,{checked:a.allowFileSharing,onCheckedChange:s=>i("allowFileSharing",s)})})]})]})]}),e.jsxs(o,{className:"border-none shadow-sm",children:[e.jsx(m,{children:e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(J,{className:"h-5 w-5"}),"Notification Settings"]})}),e.jsx(x,{className:"space-y-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"Mute Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Turn off all notifications from this group"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(f,{checked:a.muteNotifications,onCheckedChange:s=>i("muteNotifications",s)})})]})})]}),e.jsxs(o,{className:"border-none shadow-sm",children:[e.jsx(m,{children:e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-5 w-5"}),"Message Settings"]})}),e.jsxs(x,{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"Auto-delete Messages"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatically delete old messages after a set period"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(f,{checked:a.autoDeleteMessages,onCheckedChange:s=>i("autoDeleteMessages",s)})})]}),a.autoDeleteMessages&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"retention",children:"Message Retention Period"}),e.jsxs(b,{value:a.messageRetention,onValueChange:s=>i("messageRetention",s),children:[e.jsx(y,{className:"w-full sm:w-[220px]",children:e.jsx(C,{})}),e.jsxs(M,{children:[e.jsx(l,{value:"7days",children:"7 days"}),e.jsx(l,{value:"30days",children:"30 days"}),e.jsx(l,{value:"90days",children:"90 days"}),e.jsx(l,{value:"1year",children:"1 year"}),e.jsx(l,{value:"never",children:"Never"})]})]})]})]})]}),e.jsxs(o,{className:"border-none shadow-sm",children:[e.jsxs(m,{children:[e.jsx(h,{children:"Role & Channel Permissions"}),e.jsx(Q,{children:"Configure per-role permissions for channels in this group"})]}),e.jsx(x,{className:"space-y-4 overflow-x-auto",children:e.jsx(de,{roles:[{id:"owner",name:"Owner"},{id:"admin",name:"Admin"},{id:"moderator",name:"Moderator"},{id:"member",name:"Member"},{id:"guest",name:"Guest"}],permissions:O,overrides:R,onChange:F})})]}),e.jsxs(o,{className:"border-none shadow-sm",children:[e.jsxs(m,{children:[e.jsx(h,{children:"Member Management"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage roles and remove members from the group"})]}),e.jsx(x,{children:e.jsx("div",{className:"space-y-3",children:a.members.map(s=>e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-3 p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(D,{className:"h-10 w-10",children:[e.jsx(k,{src:s.avatar||"/placeholder.svg"}),e.jsx(P,{children:s.name.slice(0,2)})]}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-medium truncate",children:s.name}),V(s.role),e.jsx("div",{className:`w-2 h-2 rounded-full ${s.isOnline?"bg-green-500":"bg-gray-300"}`,"aria-label":s.isOnline?"Online":"Offline"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.username})]})]}),e.jsxs("div",{className:"flex items-center gap-2 md:ml-auto",children:[e.jsxs(b,{value:s.role,onValueChange:r=>U(s.id,r),disabled:s.role==="admin",children:[e.jsx(y,{className:"w-full sm:w-40",children:e.jsx(C,{})}),e.jsxs(M,{children:[e.jsx(l,{value:"admin",children:"Admin"}),e.jsx(l,{value:"moderator",children:"Moderator"}),e.jsx(l,{value:"member",children:"Member"})]})]}),s.role!=="admin"&&e.jsx(d,{size:"sm",variant:"outline",onClick:()=>L(s.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50","aria-label":`Remove ${s.name}`,title:`Remove ${s.name}`,children:e.jsx(te,{className:"h-4 w-4"})})]})]},s.id))})})]}),e.jsxs(o,{className:"border-none shadow-sm border-red-200",children:[e.jsxs(m,{children:[e.jsxs(h,{className:"text-red-600 flex items-center gap-2",children:[e.jsx(A,{className:"h-5 w-5"}),"Danger Zone"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Irreversible and destructive actions"})]}),e.jsx(x,{children:e.jsx("div",{className:"p-4 border border-red-200 rounded-lg bg-red-50",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-red-800",children:"Delete Group"}),e.jsx("p",{className:"text-sm text-red-600",children:"Permanently delete this group and all its content. This action cannot be undone."})]}),e.jsxs(_,{open:n,onOpenChange:u,children:[e.jsx(X,{asChild:!0,children:e.jsxs(d,{variant:"destructive",className:"bg-red-600 hover:bg-red-700 w-full sm:w-auto",children:[e.jsx(re,{className:"h-4 w-4 mr-2"}),"Delete Group"]})}),e.jsxs(ee,{children:[e.jsx(se,{children:e.jsxs(ae,{className:"flex items-center gap-2 text-red-600",children:[e.jsx(A,{className:"h-5 w-5"}),"Delete Group"]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:['Are you sure you want to delete "',a.name,'"? This action will:']}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1 ml-4",children:[e.jsx("li",{children:"• Permanently delete all messages and media"}),e.jsx("li",{children:"• Remove all members from the group"}),e.jsx("li",{children:"• Delete all group settings and data"}),e.jsx("li",{children:"• This action cannot be undone"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"confirm",children:'Type "DELETE" to confirm:'}),e.jsx(T,{id:"confirm",placeholder:"Type DELETE here"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx(d,{variant:"destructive",onClick:E,className:"flex-1",children:"Delete Group Permanently"}),e.jsx(d,{variant:"outline",onClick:()=>u(!1),className:"flex-1",children:"Cancel"})]})]})]})]})]})})})]})]})]})})}export{pe as default};
